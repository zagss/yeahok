<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>七、切片 | 你当像鸟飞往你的山</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="preload" href="/yeahok/assets/style-77c93d53.css" as="style"><link rel="stylesheet" href="/yeahok/assets/style-77c93d53.css">
    <link rel="modulepreload" href="/yeahok/assets/app-03679ccd.js"><link rel="modulepreload" href="/yeahok/assets/slice.html-41c66b1f.js"><link rel="modulepreload" href="/yeahok/assets/slice.html-29e27334.js"><link rel="prefetch" href="/yeahok/assets/index.html-0a856ab4.js" as="script"><link rel="prefetch" href="/yeahok/assets/collection.html-4f04ed55.js" as="script"><link rel="prefetch" href="/yeahok/assets/func.html-7f25f14a.js" as="script"><link rel="prefetch" href="/yeahok/assets/git.html-eca86812.js" as="script"><link rel="prefetch" href="/yeahok/assets/goview.html-5033cccd.js" as="script"><link rel="prefetch" href="/yeahok/assets/html.html-65de3cd3.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-92edef6f.js" as="script"><link rel="prefetch" href="/yeahok/assets/js.html-5c30a33c.js" as="script"><link rel="prefetch" href="/yeahok/assets/npm.html-4440708f.js" as="script"><link rel="prefetch" href="/yeahok/assets/project.html-a46e3ea8.js" as="script"><link rel="prefetch" href="/yeahok/assets/ts.html-987eab98.js" as="script"><link rel="prefetch" href="/yeahok/assets/upload.html-1251052b.js" as="script"><link rel="prefetch" href="/yeahok/assets/vue.html-44f3ff4d.js" as="script"><link rel="prefetch" href="/yeahok/assets/webpack.html-a1e4eab7.js" as="script"><link rel="prefetch" href="/yeahok/assets/work.html-6744da99.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-f909bb66.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-a98a7155.js" as="script"><link rel="prefetch" href="/yeahok/assets/array.html-1309b5bf.js" as="script"><link rel="prefetch" href="/yeahok/assets/controlFlow.html-d775a657.js" as="script"><link rel="prefetch" href="/yeahok/assets/dataType.html-39fe7fe8.js" as="script"><link rel="prefetch" href="/yeahok/assets/function.html-2ee7a526.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-91d9cff2.js" as="script"><link rel="prefetch" href="/yeahok/assets/learn.html-0014cc95.js" as="script"><link rel="prefetch" href="/yeahok/assets/map.html-6491db84.js" as="script"><link rel="prefetch" href="/yeahok/assets/operators.html-ae536fc7.js" as="script"><link rel="prefetch" href="/yeahok/assets/package.html-25dced3b.js" as="script"><link rel="prefetch" href="/yeahok/assets/pointer.html-8fe80e61.js" as="script"><link rel="prefetch" href="/yeahok/assets/struct.html-53bdbaaa.js" as="script"><link rel="prefetch" href="/yeahok/assets/var.html-2d431683.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-726fa291.js" as="script"><link rel="prefetch" href="/yeahok/assets/promise.html-46d69467.js" as="script"><link rel="prefetch" href="/yeahok/assets/httpErrors.html-c193037a.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-9d7a719f.js" as="script"><link rel="prefetch" href="/yeahok/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-c26560c9.js" as="script"><link rel="prefetch" href="/yeahok/assets/collection.html-99c1a37c.js" as="script"><link rel="prefetch" href="/yeahok/assets/func.html-7870a5fd.js" as="script"><link rel="prefetch" href="/yeahok/assets/git.html-74f37723.js" as="script"><link rel="prefetch" href="/yeahok/assets/goview.html-40894cf2.js" as="script"><link rel="prefetch" href="/yeahok/assets/html.html-e48114d8.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-2ada4722.js" as="script"><link rel="prefetch" href="/yeahok/assets/js.html-fda0db12.js" as="script"><link rel="prefetch" href="/yeahok/assets/npm.html-72470ede.js" as="script"><link rel="prefetch" href="/yeahok/assets/project.html-2856af8f.js" as="script"><link rel="prefetch" href="/yeahok/assets/ts.html-461c3d67.js" as="script"><link rel="prefetch" href="/yeahok/assets/upload.html-1d3d7c96.js" as="script"><link rel="prefetch" href="/yeahok/assets/vue.html-24df0513.js" as="script"><link rel="prefetch" href="/yeahok/assets/webpack.html-741ebaac.js" as="script"><link rel="prefetch" href="/yeahok/assets/work.html-9c081dcd.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-e0dd6b6d.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-5c6bbb95.js" as="script"><link rel="prefetch" href="/yeahok/assets/array.html-ffdc9d5d.js" as="script"><link rel="prefetch" href="/yeahok/assets/controlFlow.html-e8c144d0.js" as="script"><link rel="prefetch" href="/yeahok/assets/dataType.html-b46634c5.js" as="script"><link rel="prefetch" href="/yeahok/assets/function.html-723b2627.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-63779673.js" as="script"><link rel="prefetch" href="/yeahok/assets/learn.html-0674b16c.js" as="script"><link rel="prefetch" href="/yeahok/assets/map.html-8c3dc112.js" as="script"><link rel="prefetch" href="/yeahok/assets/operators.html-8af8f051.js" as="script"><link rel="prefetch" href="/yeahok/assets/package.html-df52c18b.js" as="script"><link rel="prefetch" href="/yeahok/assets/pointer.html-412988a3.js" as="script"><link rel="prefetch" href="/yeahok/assets/struct.html-31193b86.js" as="script"><link rel="prefetch" href="/yeahok/assets/var.html-1a413cb1.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-d24e3ce3.js" as="script"><link rel="prefetch" href="/yeahok/assets/promise.html-271ebcb6.js" as="script"><link rel="prefetch" href="/yeahok/assets/httpErrors.html-f9e48a6a.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-708347eb.js" as="script"><link rel="prefetch" href="/yeahok/assets/404.html-c8147ba1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/yeahok/" class=""><img class="logo" src="/yeahok/images/logo.png" alt="你当像鸟飞往你的山"><span class="site-name can-hide">你当像鸟飞往你的山</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/yeahok/interview" class="" aria-label="温故知新"><!--[--><!--]--> 温故知新 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/yeahok/learn/go/" class="router-link-active" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/npm/" class="" aria-label="每天一个 npm 包"><!--[--><!--]--> 每天一个 npm 包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/cli/" class="" aria-label="从 0 构建自己的脚手架"><!--[--><!--]--> 从 0 构建自己的脚手架 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/yeahok/interview" class="" aria-label="温故知新"><!--[--><!--]--> 温故知新 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/yeahok/learn/go/" class="router-link-active" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/npm/" class="" aria-label="每天一个 npm 包"><!--[--><!--]--> 每天一个 npm 包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/cli/" class="" aria-label="从 0 构建自己的脚手架"><!--[--><!--]--> 从 0 构建自己的脚手架 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/yeahok/learn/go/" class="router-link-active sidebar-item sidebar-heading" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/learn.html" class="sidebar-item sidebar-heading" aria-label="一、开发环境准备"><!--[--><!--]--> 一、开发环境准备 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/var.html" class="sidebar-item sidebar-heading" aria-label="二、变量和常量"><!--[--><!--]--> 二、变量和常量 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/dataType.html" class="sidebar-item sidebar-heading" aria-label="三、基础数据类型"><!--[--><!--]--> 三、基础数据类型 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/operators.html" class="sidebar-item sidebar-heading" aria-label="四、运算符"><!--[--><!--]--> 四、运算符 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/controlFlow.html" class="sidebar-item sidebar-heading" aria-label="五、流程控制"><!--[--><!--]--> 五、流程控制 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/array.html" class="sidebar-item sidebar-heading" aria-label="六、数组"><!--[--><!--]--> 六、数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="七、切片"><!--[--><!--]--> 七、切片 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_1-切片的长度-和-容量" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 切片的长度 和 容量"><!--[--><!--]--> 1. 切片的长度 和 容量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_2-切片表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 切片表达式"><!--[--><!--]--> 2. 切片表达式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_3-使用make-函数构造切片" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. 使用make()函数构造切片"><!--[--><!--]--> 3. 使用make()函数构造切片 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_4-切片的本质" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 切片的本质"><!--[--><!--]--> 4. 切片的本质 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_5-判断切片是否为空" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 判断切片是否为空"><!--[--><!--]--> 5. 判断切片是否为空 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_6-切片不能直接比较" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. 切片不能直接比较"><!--[--><!--]--> 6. 切片不能直接比较 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_6-切片的赋值拷贝" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. 切片的赋值拷贝"><!--[--><!--]--> 6. 切片的赋值拷贝 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_7-切片遍历" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. 切片遍历"><!--[--><!--]--> 7. 切片遍历 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_8-append-方法为切片添加元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. append()方法为切片添加元素"><!--[--><!--]--> 8. append()方法为切片添加元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_9-切片的扩容策略" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. 切片的扩容策略"><!--[--><!--]--> 9. 切片的扩容策略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_10-使用copy-函数复制切片" class="router-link-active router-link-exact-active sidebar-item" aria-label="10. 使用copy()函数复制切片"><!--[--><!--]--> 10. 使用copy()函数复制切片 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/slice.html#_11-从切片中删除元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="11. 从切片中删除元素"><!--[--><!--]--> 11. 从切片中删除元素 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/yeahok/learn/go/map.html" class="sidebar-item sidebar-heading" aria-label="八、map"><!--[--><!--]--> 八、map <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/function.html" class="sidebar-item sidebar-heading" aria-label="九、函数"><!--[--><!--]--> 九、函数 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/pointer.html" class="sidebar-item sidebar-heading" aria-label="十、指针"><!--[--><!--]--> 十、指针 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/struct.html" class="sidebar-item sidebar-heading" aria-label="十一、结构体"><!--[--><!--]--> 十一、结构体 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/package.html" class="sidebar-item sidebar-heading" aria-label="12. 包"><!--[--><!--]--> 12. 包 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="七、切片" tabindex="-1"><a class="header-anchor" href="#七、切片" aria-hidden="true">#</a> 七、切片</h1><p>切片（Slice）是一个拥有相同元素的可变长度的序列。它是基于数组类型做的一层封装。支持自动扩容。</p><p>切片是一个引用类型，它的内部结构体包含 <code>地址</code>、 <code>长度</code> 和 <code>容量</code>。</p><p>例子：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>         <span class="token comment">// 声明一个字符串切片</span>
  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment">// 声明一个整型切片并初始化</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>         <span class="token comment">// []</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>         <span class="token comment">// []</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>  <span class="token comment">// true</span>
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>  <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-切片的长度-和-容量" tabindex="-1"><a class="header-anchor" href="#_1-切片的长度-和-容量" aria-hidden="true">#</a> 1. 切片的长度 和 容量</h2><p>切片使用 <code>len()</code> 函数求长度，使用 <code>cap()</code> 函数求切片的容量。</p><h2 id="_2-切片表达式" tabindex="-1"><a class="header-anchor" href="#_2-切片表达式" aria-hidden="true">#</a> 2. 切片表达式</h2><p>切片表达式中的low和high表示一个索引范围（左包含，右不包含），下面代码中从数组a中选出 <strong>1&lt;=索引值&lt;4</strong> 的元素组成切片s，得到的切片长度=high-low，容量等于得到的切片的底层数组的容量。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	s <span class="token operator">:=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment">// s := a[low:high]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;s:%v len(s):%v cap(s):%v\n&quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
	s2 <span class="token operator">:=</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>  <span class="token comment">// 索引的上限是 cap(s) 而不是 len(s)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;s2:%v len(s2):%v cap(s2):%v\n&quot;</span><span class="token punctuation">,</span> s2<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// s:[2 3] len(s):2 cap(s):4</span>
<span class="token comment">// s2:[5] len(s2):1 cap(s2):1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完整切片表达式:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// 切片的容量设置为 max-low</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	t <span class="token operator">:=</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;t:%v len(t):%v cap(t):%v\n&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// t:[2 3] len(t):2 cap(t):4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-使用make-函数构造切片" tabindex="-1"><a class="header-anchor" href="#_3-使用make-函数构造切片" aria-hidden="true">#</a> 3. 使用make()函数构造切片</h2><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token builtin">cap</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>T:切片的元素类型</li><li>size:切片中元素的数量</li><li>cap:切片的容量</li></ul><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>      <span class="token comment">// [0 0]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-切片的本质" tabindex="-1"><a class="header-anchor" href="#_4-切片的本质" aria-hidden="true">#</a> 4. 切片的本质</h2><p>切片的本质就是对底层数组的封装，它包含了三个信息：底层数组的指针、切片的长度（len）和切片的容量（cap）。</p><p>举个例子，现在有一个数组 <code>a := [8]int{0, 1, 2, 3, 4, 5, 6, 7}</code>，切片 <code>s1 := a[:5]</code>，相应示意图如下。 <img src="https://www.liwenzhou.com/images/Go/slice/slice_01.png" alt="Alt text"></p><p>切片 <code>s2 := a[3:6]</code>，相应示意图如下：</p><p><img src="https://www.liwenzhou.com/images/Go/slice/slice_02.png" alt="Alt text"></p><h2 id="_5-判断切片是否为空" tabindex="-1"><a class="header-anchor" href="#_5-判断切片是否为空" aria-hidden="true">#</a> 5. 判断切片是否为空</h2><p><strong>要检查切片是否为空，请始终使用 <code>len(s) == 0</code> 来判断，而不应该使用 <code>s == nil</code> 来判断</strong>。</p><h2 id="_6-切片不能直接比较" tabindex="-1"><a class="header-anchor" href="#_6-切片不能直接比较" aria-hidden="true">#</a> 6. 切片不能直接比较</h2><p>切片之间是不能比较的，我们不能使用 <code>==</code> 操作符来判断两个切片是否含有全部相等元素。 切片唯一合法的比较操作是和 <code>nil</code> 比较。</p><p>一个nil值的切片并没有底层数组，一个nil值的切片的长度和容量都是0。但是我们不能说一个长度和容量都是0的切片一定是nil，例如下面的示例：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">var</span> s1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>         <span class="token comment">// len(s1)=0; cap(s1)=0; s1==nil</span>
s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token comment">// len(s2)=0; cap(s2)=0; s2!=nil</span>
s3 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// len(s3)=0; cap(s3)=0; s3!=nil</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-切片的赋值拷贝" tabindex="-1"><a class="header-anchor" href="#_6-切片的赋值拷贝" aria-hidden="true">#</a> 6. 切片的赋值拷贝</h2><p>拷贝前后两个变量 <strong>共享底层数组</strong>，对一个切片的修改会影响另一个切片的内容:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// [0 0 0]</span>
	s2 <span class="token operator">:=</span> s1             <span class="token comment">// 将s1直接赋值给s2，s1和s2共用一个底层数组</span>
	s2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>      <span class="token comment">// [100 0 0]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span>      <span class="token comment">// [100 0 0]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-切片遍历" tabindex="-1"><a class="header-anchor" href="#_7-切片遍历" aria-hidden="true">#</a> 7. 切片遍历</h2><p>切片的遍历方式和数组是一致的，支持索引遍历和for range遍历:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-append-方法为切片添加元素" tabindex="-1"><a class="header-anchor" href="#_8-append-方法为切片添加元素" aria-hidden="true">#</a> 8. append()方法为切片添加元素</h2><p>Go语言的内建函数append()可以为切片动态添加元素。 可以一次添加一个元素，可以添加多个元素，也可以添加另一个切片中的元素（后面加…）。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment">// [1]</span>
	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment">// [1 2 3 4]</span>
	s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">}</span>  
	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s2<span class="token operator">...</span><span class="token punctuation">)</span>    <span class="token comment">// [1 2 3 4 5 6 7]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>注意</mark>：通过var声明的零值切片可以在append()函数直接使用，无需初始化。</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>没有必要像下面的代码一样初始化一个切片再传入append()函数使用:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 没有必要初始化</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token comment">// 没有必要初始化</span>
s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-切片的扩容策略" tabindex="-1"><a class="header-anchor" href="#_9-切片的扩容策略" aria-hidden="true">#</a> 9. 切片的扩容策略</h2><ul><li>首先判断，如果新申请容量（cap）大于2倍的旧容量（old.cap），最终容量（newcap）就是新申请的容量（cap）。</li><li>否则判断，如果旧切片的长度小于1024，则最终容量(newcap)就是旧容量(old.cap)的两倍，即（newcap=doublecap），</li><li>否则判断，如果旧切片长度大于等于1024，则最终容量（newcap）从旧容量（old.cap）开始循环增加原来的1/4，即（newcap=old.cap,for {newcap += newcap/4}）直到最终容量（newcap）大于等于新申请的容量(cap)，即（newcap &gt;= cap） 如果最终容量（cap）计算值溢出，则最终容量（cap）就是新申请容量（cap）。</li></ul><h2 id="_10-使用copy-函数复制切片" tabindex="-1"><a class="header-anchor" href="#_10-使用copy-函数复制切片" aria-hidden="true">#</a> 10. 使用copy()函数复制切片</h2><p>由于切片是引用类型，所以a和b其实都指向了同一块内存地址。修改b的同时a的值也会发生变化。</p><p>Go语言内建的 <code>copy()</code> 函数可以迅速地将一个切片的数据复制到另外一个切片空间中.</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	c <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> a<span class="token punctuation">)</span>                <span class="token comment">// 使用copy()函数将切片a中的元素复制到切片c</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token comment">// [1 2 3 4 5]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>            <span class="token comment">// [1 2 3 4 5]</span>
	c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1000</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token comment">// [1 2 3 4 5]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>            <span class="token comment">// [1000 2 3 4 5]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-从切片中删除元素" tabindex="-1"><a class="header-anchor" href="#_11-从切片中删除元素" aria-hidden="true">#</a> 11. 从切片中删除元素</h2><p>Go语言中并没有删除切片元素的专用方法，我们可以使用切片本身的特性来删除元素:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 从切片中删除元素</span>
	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">}</span>
	<span class="token comment">// 要删除索引为2的元素</span>
	a <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">...</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//[30 31 33 34 35 36 37]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/yeahok/learn/go/array.html" class="" aria-label="六、数组"><!--[--><!--]--> 六、数组 <!--[--><!--]--></a></span><span class="next"><a href="/yeahok/learn/go/map.html" class="" aria-label="八、map"><!--[--><!--]--> 八、map <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/yeahok/assets/app-03679ccd.js" defer></script>
  </body>
</html>
