<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><title>一、开发环境准备 | 你当像鸟飞往你的山</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="preload" href="/yeahok/assets/style-77c93d53.css" as="style"><link rel="stylesheet" href="/yeahok/assets/style-77c93d53.css">
    <link rel="modulepreload" href="/yeahok/assets/app-03679ccd.js"><link rel="modulepreload" href="/yeahok/assets/learn.html-0674b16c.js"><link rel="modulepreload" href="/yeahok/assets/learn.html-0014cc95.js"><link rel="prefetch" href="/yeahok/assets/index.html-0a856ab4.js" as="script"><link rel="prefetch" href="/yeahok/assets/collection.html-4f04ed55.js" as="script"><link rel="prefetch" href="/yeahok/assets/func.html-7f25f14a.js" as="script"><link rel="prefetch" href="/yeahok/assets/git.html-eca86812.js" as="script"><link rel="prefetch" href="/yeahok/assets/goview.html-5033cccd.js" as="script"><link rel="prefetch" href="/yeahok/assets/html.html-65de3cd3.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-92edef6f.js" as="script"><link rel="prefetch" href="/yeahok/assets/js.html-5c30a33c.js" as="script"><link rel="prefetch" href="/yeahok/assets/npm.html-4440708f.js" as="script"><link rel="prefetch" href="/yeahok/assets/project.html-a46e3ea8.js" as="script"><link rel="prefetch" href="/yeahok/assets/ts.html-987eab98.js" as="script"><link rel="prefetch" href="/yeahok/assets/upload.html-1251052b.js" as="script"><link rel="prefetch" href="/yeahok/assets/vue.html-44f3ff4d.js" as="script"><link rel="prefetch" href="/yeahok/assets/webpack.html-a1e4eab7.js" as="script"><link rel="prefetch" href="/yeahok/assets/work.html-6744da99.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-f909bb66.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-a98a7155.js" as="script"><link rel="prefetch" href="/yeahok/assets/array.html-1309b5bf.js" as="script"><link rel="prefetch" href="/yeahok/assets/controlFlow.html-d775a657.js" as="script"><link rel="prefetch" href="/yeahok/assets/dataType.html-39fe7fe8.js" as="script"><link rel="prefetch" href="/yeahok/assets/function.html-2ee7a526.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-91d9cff2.js" as="script"><link rel="prefetch" href="/yeahok/assets/map.html-6491db84.js" as="script"><link rel="prefetch" href="/yeahok/assets/operators.html-ae536fc7.js" as="script"><link rel="prefetch" href="/yeahok/assets/package.html-25dced3b.js" as="script"><link rel="prefetch" href="/yeahok/assets/pointer.html-8fe80e61.js" as="script"><link rel="prefetch" href="/yeahok/assets/slice.html-29e27334.js" as="script"><link rel="prefetch" href="/yeahok/assets/struct.html-53bdbaaa.js" as="script"><link rel="prefetch" href="/yeahok/assets/var.html-2d431683.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-726fa291.js" as="script"><link rel="prefetch" href="/yeahok/assets/promise.html-46d69467.js" as="script"><link rel="prefetch" href="/yeahok/assets/httpErrors.html-c193037a.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-9d7a719f.js" as="script"><link rel="prefetch" href="/yeahok/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-c26560c9.js" as="script"><link rel="prefetch" href="/yeahok/assets/collection.html-99c1a37c.js" as="script"><link rel="prefetch" href="/yeahok/assets/func.html-7870a5fd.js" as="script"><link rel="prefetch" href="/yeahok/assets/git.html-74f37723.js" as="script"><link rel="prefetch" href="/yeahok/assets/goview.html-40894cf2.js" as="script"><link rel="prefetch" href="/yeahok/assets/html.html-e48114d8.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-2ada4722.js" as="script"><link rel="prefetch" href="/yeahok/assets/js.html-fda0db12.js" as="script"><link rel="prefetch" href="/yeahok/assets/npm.html-72470ede.js" as="script"><link rel="prefetch" href="/yeahok/assets/project.html-2856af8f.js" as="script"><link rel="prefetch" href="/yeahok/assets/ts.html-461c3d67.js" as="script"><link rel="prefetch" href="/yeahok/assets/upload.html-1d3d7c96.js" as="script"><link rel="prefetch" href="/yeahok/assets/vue.html-24df0513.js" as="script"><link rel="prefetch" href="/yeahok/assets/webpack.html-741ebaac.js" as="script"><link rel="prefetch" href="/yeahok/assets/work.html-9c081dcd.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-e0dd6b6d.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-5c6bbb95.js" as="script"><link rel="prefetch" href="/yeahok/assets/array.html-ffdc9d5d.js" as="script"><link rel="prefetch" href="/yeahok/assets/controlFlow.html-e8c144d0.js" as="script"><link rel="prefetch" href="/yeahok/assets/dataType.html-b46634c5.js" as="script"><link rel="prefetch" href="/yeahok/assets/function.html-723b2627.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-63779673.js" as="script"><link rel="prefetch" href="/yeahok/assets/map.html-8c3dc112.js" as="script"><link rel="prefetch" href="/yeahok/assets/operators.html-8af8f051.js" as="script"><link rel="prefetch" href="/yeahok/assets/package.html-df52c18b.js" as="script"><link rel="prefetch" href="/yeahok/assets/pointer.html-412988a3.js" as="script"><link rel="prefetch" href="/yeahok/assets/slice.html-41c66b1f.js" as="script"><link rel="prefetch" href="/yeahok/assets/struct.html-31193b86.js" as="script"><link rel="prefetch" href="/yeahok/assets/var.html-1a413cb1.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-d24e3ce3.js" as="script"><link rel="prefetch" href="/yeahok/assets/promise.html-271ebcb6.js" as="script"><link rel="prefetch" href="/yeahok/assets/httpErrors.html-f9e48a6a.js" as="script"><link rel="prefetch" href="/yeahok/assets/index.html-708347eb.js" as="script"><link rel="prefetch" href="/yeahok/assets/404.html-c8147ba1.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/yeahok/" class=""><img class="logo" src="/yeahok/images/logo.png" alt="你当像鸟飞往你的山"><span class="site-name can-hide">你当像鸟飞往你的山</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/yeahok/interview" class="" aria-label="温故知新"><!--[--><!--]--> 温故知新 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/yeahok/learn/go/" class="router-link-active" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/npm/" class="" aria-label="每天一个 npm 包"><!--[--><!--]--> 每天一个 npm 包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/cli/" class="" aria-label="从 0 构建自己的脚手架"><!--[--><!--]--> 从 0 构建自己的脚手架 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/yeahok/interview" class="" aria-label="温故知新"><!--[--><!--]--> 温故知新 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="学而不怠"><span class="title">学而不怠</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/yeahok/learn/go/" class="router-link-active" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/npm/" class="" aria-label="每天一个 npm 包"><!--[--><!--]--> 每天一个 npm 包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/yeahok/learn/cli/" class="" aria-label="从 0 构建自己的脚手架"><!--[--><!--]--> 从 0 构建自己的脚手架 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/yeahok/learn/go/" class="router-link-active sidebar-item sidebar-heading" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="一、开发环境准备"><!--[--><!--]--> 一、开发环境准备 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yeahok/learn/go/learn.html#开发环境搭建" class="router-link-active router-link-exact-active sidebar-item" aria-label="开发环境搭建"><!--[--><!--]--> 开发环境搭建 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_1-下载" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 下载"><!--[--><!--]--> 1. 下载 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_2-安装完成" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. 安装完成"><!--[--><!--]--> 2. 安装完成 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_3-goroot-和-gopath" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. GOROOT 和 GOPATH"><!--[--><!--]--> 3. GOROOT 和 GOPATH <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_4-开发" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. 开发"><!--[--><!--]--> 4. 开发 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#vs-code-配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="VS Code 配置"><!--[--><!--]--> VS Code 配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#依赖管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="依赖管理"><!--[--><!--]--> 依赖管理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_1-为什么需要依赖管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. 为什么需要依赖管理"><!--[--><!--]--> 1. 为什么需要依赖管理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_3-go-module" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. go module"><!--[--><!--]--> 3. go module <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_4-go-mod-命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="4. go mod 命令"><!--[--><!--]--> 4. go mod 命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_5-go-mod-文件" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. go.mod 文件"><!--[--><!--]--> 5. go.mod 文件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_6-go-get" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. go get"><!--[--><!--]--> 6. go get <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_7-整理依赖" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. 整理依赖"><!--[--><!--]--> 7. 整理依赖 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_8-go-mod-edit" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. go mod edit"><!--[--><!--]--> 8. go mod edit <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_9-在项目中使用go-module" class="router-link-active router-link-exact-active sidebar-item" aria-label="9. 在项目中使用go module"><!--[--><!--]--> 9. 在项目中使用go module <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/yeahok/learn/go/learn.html#_10-如何使用go-module导入本地包" class="router-link-active router-link-exact-active sidebar-item" aria-label="10. 如何使用go module导入本地包"><!--[--><!--]--> 10. 如何使用go module导入本地包 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/yeahok/learn/go/var.html" class="sidebar-item sidebar-heading" aria-label="二、变量和常量"><!--[--><!--]--> 二、变量和常量 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/dataType.html" class="sidebar-item sidebar-heading" aria-label="三、基础数据类型"><!--[--><!--]--> 三、基础数据类型 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/operators.html" class="sidebar-item sidebar-heading" aria-label="四、运算符"><!--[--><!--]--> 四、运算符 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/controlFlow.html" class="sidebar-item sidebar-heading" aria-label="五、流程控制"><!--[--><!--]--> 五、流程控制 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/array.html" class="sidebar-item sidebar-heading" aria-label="六、数组"><!--[--><!--]--> 六、数组 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/slice.html" class="sidebar-item sidebar-heading" aria-label="七、切片"><!--[--><!--]--> 七、切片 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/map.html" class="sidebar-item sidebar-heading" aria-label="八、map"><!--[--><!--]--> 八、map <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/function.html" class="sidebar-item sidebar-heading" aria-label="九、函数"><!--[--><!--]--> 九、函数 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/pointer.html" class="sidebar-item sidebar-heading" aria-label="十、指针"><!--[--><!--]--> 十、指针 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/struct.html" class="sidebar-item sidebar-heading" aria-label="十一、结构体"><!--[--><!--]--> 十一、结构体 <!--[--><!--]--></a><!----></li><li><a href="/yeahok/learn/go/package.html" class="sidebar-item sidebar-heading" aria-label="12. 包"><!--[--><!--]--> 12. 包 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="一、开发环境准备" tabindex="-1"><a class="header-anchor" href="#一、开发环境准备" aria-hidden="true">#</a> 一、开发环境准备</h1><h2 id="开发环境搭建" tabindex="-1"><a class="header-anchor" href="#开发环境搭建" aria-hidden="true">#</a> 开发环境搭建</h2><h3 id="_1-下载" tabindex="-1"><a class="header-anchor" href="#_1-下载" aria-hidden="true">#</a> 1. 下载</h3><p>Go官网下载地址： <a href="https://golang.org/dl/" target="_blank" rel="noopener noreferrer">https://golang.org/dl/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Go官方镜像站（推荐）：<a href="https://golang.google.cn/dl/" target="_blank" rel="noopener noreferrer">https://golang.google.cn/dl/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_2-安装完成" tabindex="-1"><a class="header-anchor" href="#_2-安装完成" aria-hidden="true">#</a> 2. 安装完成</h3><p>验证是否安装成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go version
<span class="token comment"># go version go1.20.2 darwin/amd64</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-goroot-和-gopath" tabindex="-1"><a class="header-anchor" href="#_3-goroot-和-gopath" aria-hidden="true">#</a> 3. GOROOT 和 GOPATH</h3><p><code>GOROOT</code> 和 <code>GOPATH</code> 都是环境变量。</p><p><code>GOROOT</code>：安装go开发包的路径，而从Go 1.8 版本开始，Go 开发包在安装完成后，会为 <code>GOPATH</code> 设置一个默认目录。 并且在 Go 1.14 及以后版本中启用了 Go Module 模式之后，不一定非要将代码写到 <code>GOPATH</code> 目录下，所以也就 <!----> 了，使用默认即可。</p><blockquote><p>GOPROXY 非常重要</p></blockquote><p>Go 1.14 版本之后，推荐使用 <code>go mod</code> 模式来管理依赖环境，不再强制我们把代码写在 <code>GOPATH</code> 下面的src目录了。</p><p>默认 <code>GOPROXY</code> 配置是：<code>GOPROXY=https://proxy.golang.org,direct</code>，由于国内访问不到，需替换一个PROXY，推荐使用 <code>https://goproxy.io</code> 或 <code>https//goproxy.cn</code></p><p>执行下面的命令修改GOPROXY：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-开发" tabindex="-1"><a class="header-anchor" href="#_4-开发" aria-hidden="true">#</a> 4. 开发</h3><h4 id="_4-0-安装-go-扩展" tabindex="-1"><a class="header-anchor" href="#_4-0-安装-go-扩展" aria-hidden="true">#</a> 4.0. 安装 go 扩展</h4><blockquote><p>Hello World</p></blockquote><p>现在我们来创建第一个Go项目——hello，创建一个hello目录。</p><h4 id="_4-1-go-mod-init" tabindex="-1"><a class="header-anchor" href="#_4-1-go-mod-init" aria-hidden="true">#</a> 4.1. go mod init</h4><p>使用 go module 模式新建项目时，我们需要通过 <code>go mod init</code> 项目名命令对项目进行初始化，该命令会在项目根目录下生成 go.mod 文件。例如，我们使用hello作为我们第一个Go项目的名称，执行如下命令。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod init hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-2-编写代码" tabindex="-1"><a class="header-anchor" href="#_4-2-编写代码" aria-hidden="true">#</a> 4.2. 编写代码</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>非常重要！！！</mark> 如果此时VS Code右下角弹出提示让你安装插件，务必点 <mark>install all</mark> 进行安装。</p><h4 id="_4-3-编译" tabindex="-1"><a class="header-anchor" href="#_4-3-编译" aria-hidden="true">#</a> 4.3. 编译</h4><p><code>go build</code> 命令表示将源代码编译成可执行文件。</p><p>在hello目录下执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go build

<span class="token comment"># 还可使用 -o 参数指定遍以后的文件名称</span>
go build <span class="token parameter variable">-o</span> heihei
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编译得到的可执行文件会保存在执行编译命令的当前目录下，如果是Windows平台会在当前目录下找到 hello.exe 可执行文件。</p><blockquote><p>go run</p></blockquote><p><code>go run main.go</code> 也可以执行程序，该命令本质上是先在临时目录编译程序然后再执行。</p><blockquote><p>go install</p></blockquote><p><code>go install</code> 表示安装的意思，它先编译源代码得到可执行文件，然后将可执行文件移动到 GOPATH 的 bin 目录下。因为我们把GOPATH下的bin目录添加到了环境变量中，所以我们就可以在任意地方直接执行可执行文件了。</p><blockquote><p>跨平台编译</p></blockquote><ol><li>如果我想在Windows下编译一个Linux下可执行文件，那需要怎么做呢？只需要在编译时指定目标操作系统的平台和处理器架构即可。</li></ol><p>如果你的 Windows 使用的是 <code>cmd</code> ，那么按如下方式指定环境变量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token comment"># 禁用CGO</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux    <span class="token comment"># 目标平台是linux</span>
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64  <span class="token comment"># 目标处理器架构是amd64</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你的 Windows 使用的是 <code>PowerShell</code> 终端，那么设置环境变量的语法为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$ENV</span>:CGO_ENABLED<span class="token operator">=</span><span class="token number">0</span>
<span class="token variable">$ENV</span>:GOOS<span class="token operator">=</span><span class="token string">&quot;linux&quot;</span>
<span class="token variable">$ENV</span>:GOARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的Windows终端下执行完上述命令后，再执行下面的命令，得到的就是能够在Linux平台运行的可执行文件了。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Windows 编译 Mac 可执行文件</li></ol><p>cmd:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64

go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PowerShell:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$ENV</span>:CGO_ENABLED<span class="token operator">=</span><span class="token number">0</span>
<span class="token variable">$ENV</span>:GOOS<span class="token operator">=</span><span class="token string">&quot;darwin&quot;</span>
<span class="token variable">$ENV</span>:GOARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>

go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Mac 编译 Linux 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>Mac 编译 Windows 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>Linux 编译 Mac 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>Linux编译Windows可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-4-执行" tabindex="-1"><a class="header-anchor" href="#_4-4-执行" aria-hidden="true">#</a> 4.4. 执行</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="vs-code-配置" tabindex="-1"><a class="header-anchor" href="#vs-code-配置" aria-hidden="true">#</a> VS Code 配置</h2><p><a href="https://www.liwenzhou.com/posts/Go/vscode/" target="_blank" rel="noopener noreferrer">VS Code配置Go语言开发环境<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="依赖管理" tabindex="-1"><a class="header-anchor" href="#依赖管理" aria-hidden="true">#</a> 依赖管理</h2><h3 id="_1-为什么需要依赖管理" tabindex="-1"><a class="header-anchor" href="#_1-为什么需要依赖管理" aria-hidden="true">#</a> 1. 为什么需要依赖管理</h3><p>最早的时候，Go 所依赖的所有的第三方库都放在 <code>GOPATH</code> 这个目录下面。这就导致了同一个库只能保存一个版本的代码。如果不同的项目依赖同一个第三方的库的不同版本，应该怎么解决？</p><h3 id="_3-go-module" tabindex="-1"><a class="header-anchor" href="#_3-go-module" aria-hidden="true">#</a> 3. go module</h3><p><code>go module</code> 是 Go1.11 版本之后官方推出的版本管理工具，并且从 Go1.13 版本开始，<code>go module</code> 将是Go语言默认的依赖管理工具。</p><blockquote><p>GO111MODULE</p></blockquote><p>要启用 <code>go module</code> 支持首先要设置环境变量 GO111MODULE ，通过它可以开启或关闭模块支持，它有三个可选值：off、on、auto，默认值是 auto。</p><ol><li>GO111MODULE=off 禁用模块支持，编译时会从 GOPATH 和 vendor 文件夹中查找包。</li><li>GO111MODULE=on 启用模块支持，编译时会忽略 GOPATH 和 vendor 文件夹，只根据 go.mod 下载依赖。</li><li>GO111MODULE=auto，当项目在 $GOPATH/src 外且项目根目录有 go.mod 文件时，开启模块支持。</li></ol><h3 id="_4-go-mod-命令" tabindex="-1"><a class="header-anchor" href="#_4-go-mod-命令" aria-hidden="true">#</a> 4. go mod 命令</h3><p>常用的 go mod 命令如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod download    <span class="token comment"># 下载依赖的 module 到本地 cache（默认为$GOPATH/pkg/mod目录）</span>
go mod edit        <span class="token comment"># 编辑 go.mod 文件</span>
go mod graph       <span class="token comment"># 打印模块依赖图</span>
go mod init        <span class="token comment"># 初始化当前文件夹, 创建 go.mod 文件</span>
go mod tidy        <span class="token comment"># 增加缺少的 module，删除无用的 module</span>
go mod vendor      <span class="token comment"># 将依赖复制到 vendor 下</span>
go mod verify      <span class="token comment"># 校验依赖</span>
go mod why         <span class="token comment"># 解释为什么需要依赖</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-go-mod-文件" tabindex="-1"><a class="header-anchor" href="#_5-go-mod-文件" aria-hidden="true">#</a> 5. go.mod 文件</h3><p>go.mod 文件记录了项目所有的依赖信息，其结构大致如下：</p><div class="language-mod line-numbers-mode" data-ext="mod"><pre class="language-mod"><code>module github.com/Q1mi/studygo/blogger

go 1.12

require (
	github.com/DeanThompson/ginpprof v0.0.0-20190408063150-3be636683586
	github.com/gin-gonic/gin v1.4.0
	github.com/go-sql-driver/mysql v1.4.1
	github.com/jmoiron/sqlx v1.2.0
	github.com/satori/go.uuid v1.2.0
	google.golang.org/appengine v1.6.1 // indirect
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中：</p><ul><li>module 用来定义包名</li><li>require 用来定义依赖包及版本</li><li>indirect 表示间接引用</li></ul><h5 id="依赖的版本" tabindex="-1"><a class="header-anchor" href="#依赖的版本" aria-hidden="true">#</a> 依赖的版本</h5><p>go mod支持语义化版本号，比如 <code>go get foo@v1.2.3</code>，也可以跟 git 的分支或 tag，比如 <code>go get foo@master</code>，当然也可以跟 git 提交哈希，比如 <code>go get foo@e3702bed2</code> 。关于依赖的版本支持以下几种格式：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
gopkg.in/vmihailenco/msgpack.v2 v2.9.1
gopkg.in/yaml.v2 &lt;=v2.2.1
github.com/tatsushid/go-fastping v0.0.0-20160109021039-d7bb493dee3e
latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="replace" tabindex="-1"><a class="header-anchor" href="#replace" aria-hidden="true">#</a> replace</h5><p>在国内访问 golang.org/x 的各个包都需要翻墙，你可以在 go.mod 中使用 replace 替换成 github 上对应的库。</p><div class="language-mod line-numbers-mode" data-ext="mod"><pre class="language-mod"><code>replace (
	golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac =&gt; github.com/golang/crypto v0.0.0-20180820150726-614d502a4dac
	golang.org/x/net v0.0.0-20180821023952-922f4815f713 =&gt; github.com/golang/net v0.0.0-20180826012351-8a410e7b638d
	golang.org/x/text v0.3.0 =&gt; github.com/golang/text v0.3.0
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-go-get" tabindex="-1"><a class="header-anchor" href="#_6-go-get" aria-hidden="true">#</a> 6. go get</h3><p>在项目中执行 go get 命令可以下载依赖包，并且还可以指定下载的版本。</p><ul><li>运行 <code>go get -u</code> 将会升级到最新的次要版本或者修订版本(x.y.z， z 是修订版本号， y 是次要版本号)</li><li>运行 <code>go get -u=patch</code> 将会升级到最新的修订版本</li><li>运行 <code>go get package@version</code> 将会升级到指定的版本号version</li></ul><h3 id="_7-整理依赖" tabindex="-1"><a class="header-anchor" href="#_7-整理依赖" aria-hidden="true">#</a> 7. 整理依赖</h3><p>我们在代码中删除依赖代码后，相关的依赖库并不会在 go.mod 文件中自动移除。这种情况下我们可以使用 <code>go mod tidy</code> 命令更新 go.mod 中的依赖关系。</p><h3 id="_8-go-mod-edit" tabindex="-1"><a class="header-anchor" href="#_8-go-mod-edit" aria-hidden="true">#</a> 8. go mod edit</h3><h4 id="格式化" tabindex="-1"><a class="header-anchor" href="#格式化" aria-hidden="true">#</a> 格式化</h4><p>因为我们可以手动修改go.mod文件，所以有些时候需要格式化该文件。Go提供了一下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-fmt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="添加依赖项" tabindex="-1"><a class="header-anchor" href="#添加依赖项" aria-hidden="true">#</a> 添加依赖项</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-require</span><span class="token operator">=</span>golang.org/x/text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="移除依赖项" tabindex="-1"><a class="header-anchor" href="#移除依赖项" aria-hidden="true">#</a> 移除依赖项</h4><p>比如要在 go.mod中移除 golang.org/x/text 包，可以使用如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-droprequire</span><span class="token operator">=</span>golang.org/x/text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_9-在项目中使用go-module" tabindex="-1"><a class="header-anchor" href="#_9-在项目中使用go-module" aria-hidden="true">#</a> 9. 在项目中使用go module</h3><blockquote><p>既有项目</p></blockquote><p>如果需要对一个已经存在的项目启用 <code>go module</code> ，可以按照以下步骤操作：</p><ol><li>在项目目录下执行 <code>go mod init</code> ，生成一个go.mod文件。</li><li>执行 <code>go get</code>，查找并记录当前项目的依赖，同时生成一个 go.sum 记录每个依赖库的版本和哈希值。</li></ol><blockquote><p>新项目</p></blockquote><p>对于一个新创建的项目，我们可以在项目文件夹下按照以下步骤操作：</p><ol><li>执行 <code>go mod init</code> 项目名命令，在当前项目文件夹下创建一个go.mod文件。</li><li>手动编辑 go.mod 中的 require 依赖项或执行 go get 自动发现、维护依赖。</li></ol><h3 id="_10-如何使用go-module导入本地包" tabindex="-1"><a class="header-anchor" href="#_10-如何使用go-module导入本地包" aria-hidden="true">#</a> 10. 如何使用go module导入本地包</h3><h4 id="在同一个项目下" tabindex="-1"><a class="header-anchor" href="#在同一个项目下" aria-hidden="true">#</a> 在同一个项目下</h4><p>目录结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>└── bubble
    ├── dao
    │   └── mysql.go
    ├── go.mod
    └── main.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>bubble/go.mod</code> 内容如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module zagss/bubble

go 1.14
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bubble/dao/mysql.go</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> dao

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;mypackage.New&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bubble/main.go</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;zagss/bubble/dao&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	dao<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="不在同一个目录下" tabindex="-1"><a class="header-anchor" href="#不在同一个目录下" aria-hidden="true">#</a> 不在同一个目录下</h4><p>目录结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>├── p1
│   ├── go.mod
│   └── main.go
└── p2
    ├── go.mod
    └── p2.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个时候，p1, p2 都需要进行 module 初始化，即拥有一个属于自己的 go.mod 文件，内容如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># p1 go.mod</span>
module zagss/p1

go <span class="token number">1.20</span>


<span class="token comment"># p2 go.mod</span>
module zagss/p2

go <span class="token number">1.20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后在 <code>p1/main.go</code> 中按如下方式导入：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
  <span class="token comment">// &quot;zagss/p2&quot;</span>
	p22 <span class="token string">&quot;zagss/p2&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// p2.New()</span>
  p22<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为这两个包不在同一个项目路径下，你想要导入本地包，并且这些包也没有发布到远程的 github 或其他代码仓库地址。这个时候我们就需要在 go.mod 文件中使用 <code>replace</code> 指令， p1 的 <code>go.mod</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>module zagss<span class="token operator">/</span>p1

<span class="token keyword">go</span> <span class="token number">1.20</span>

require <span class="token string">&quot;zagss/p2&quot;</span> v0<span class="token punctuation">.</span><span class="token number">0.0</span>
replace <span class="token string">&quot;zagss/p2&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;../p2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>p2.go</code> 内容如下:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> p2

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;p2.New&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>⚠️ 注意：当工作区需要生成两个 go.mod 时，编辑器会报错: <img src="/yeahok/images/go_work.png" alt="foo"></p><p>go 1.18 开始，能够支持在 workspace 中使用多个module。但是必须生成一个 <strong><code>go.work</code></strong> 文件，使用如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go work init ./p1 ./p2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/yeahok/learn/go/" class="router-link-active" aria-label="Go"><!--[--><!--]--> Go <!--[--><!--]--></a></span><span class="next"><a href="/yeahok/learn/go/var.html" class="" aria-label="二、变量和常量"><!--[--><!--]--> 二、变量和常量 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/yeahok/assets/app-03679ccd.js" defer></script>
  </body>
</html>
