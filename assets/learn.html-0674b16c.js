import{_ as t,r as o,o as c,c as r,a as n,d as a,b as s,w as p,e}from"./app-03679ccd.js";const u={},v=e('<h1 id="一、开发环境准备" tabindex="-1"><a class="header-anchor" href="#一、开发环境准备" aria-hidden="true">#</a> 一、开发环境准备</h1><h2 id="开发环境搭建" tabindex="-1"><a class="header-anchor" href="#开发环境搭建" aria-hidden="true">#</a> 开发环境搭建</h2><h3 id="_1-下载" tabindex="-1"><a class="header-anchor" href="#_1-下载" aria-hidden="true">#</a> 1. 下载</h3>',3),m={href:"https://golang.org/dl/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://golang.google.cn/dl/",target:"_blank",rel:"noopener noreferrer"},b=e(`<h3 id="_2-安装完成" tabindex="-1"><a class="header-anchor" href="#_2-安装完成" aria-hidden="true">#</a> 2. 安装完成</h3><p>验证是否安装成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go version
<span class="token comment"># go version go1.20.2 darwin/amd64</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-goroot-和-gopath" tabindex="-1"><a class="header-anchor" href="#_3-goroot-和-gopath" aria-hidden="true">#</a> 3. GOROOT 和 GOPATH</h3><p><code>GOROOT</code> 和 <code>GOPATH</code> 都是环境变量。</p>`,5),h=n("code",null,"GOROOT",-1),k=n("code",null,"GOPATH",-1),x=n("code",null,"GOPATH",-1),f=e(`<blockquote><p>GOPROXY 非常重要</p></blockquote><p>Go 1.14 版本之后，推荐使用 <code>go mod</code> 模式来管理依赖环境，不再强制我们把代码写在 <code>GOPATH</code> 下面的src目录了。</p><p>默认 <code>GOPROXY</code> 配置是：<code>GOPROXY=https://proxy.golang.org,direct</code>，由于国内访问不到，需替换一个PROXY，推荐使用 <code>https://goproxy.io</code> 或 <code>https//goproxy.cn</code></p><p>执行下面的命令修改GOPROXY：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go <span class="token function">env</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">GOPROXY</span><span class="token operator">=</span>https://goproxy.cn,direct
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-开发" tabindex="-1"><a class="header-anchor" href="#_4-开发" aria-hidden="true">#</a> 4. 开发</h3><h4 id="_4-0-安装-go-扩展" tabindex="-1"><a class="header-anchor" href="#_4-0-安装-go-扩展" aria-hidden="true">#</a> 4.0. 安装 go 扩展</h4><blockquote><p>Hello World</p></blockquote><p>现在我们来创建第一个Go项目——hello，创建一个hello目录。</p><h4 id="_4-1-go-mod-init" tabindex="-1"><a class="header-anchor" href="#_4-1-go-mod-init" aria-hidden="true">#</a> 4.1. go mod init</h4><p>使用 go module 模式新建项目时，我们需要通过 <code>go mod init</code> 项目名命令对项目进行初始化，该命令会在项目根目录下生成 go.mod 文件。例如，我们使用hello作为我们第一个Go项目的名称，执行如下命令。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod init hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-2-编写代码" tabindex="-1"><a class="header-anchor" href="#_4-2-编写代码" aria-hidden="true">#</a> 4.2. 编写代码</h4><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>非常重要！！！</mark> 如果此时VS Code右下角弹出提示让你安装插件，务必点 <mark>install all</mark> 进行安装。</p><h4 id="_4-3-编译" tabindex="-1"><a class="header-anchor" href="#_4-3-编译" aria-hidden="true">#</a> 4.3. 编译</h4><p><code>go build</code> 命令表示将源代码编译成可执行文件。</p><p>在hello目录下执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go build

<span class="token comment"># 还可使用 -o 参数指定遍以后的文件名称</span>
go build <span class="token parameter variable">-o</span> heihei
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>编译得到的可执行文件会保存在执行编译命令的当前目录下，如果是Windows平台会在当前目录下找到 hello.exe 可执行文件。</p><blockquote><p>go run</p></blockquote><p><code>go run main.go</code> 也可以执行程序，该命令本质上是先在临时目录编译程序然后再执行。</p><blockquote><p>go install</p></blockquote><p><code>go install</code> 表示安装的意思，它先编译源代码得到可执行文件，然后将可执行文件移动到 GOPATH 的 bin 目录下。因为我们把GOPATH下的bin目录添加到了环境变量中，所以我们就可以在任意地方直接执行可执行文件了。</p><blockquote><p>跨平台编译</p></blockquote><ol><li>如果我想在Windows下编译一个Linux下可执行文件，那需要怎么做呢？只需要在编译时指定目标操作系统的平台和处理器架构即可。</li></ol><p>如果你的 Windows 使用的是 <code>cmd</code> ，那么按如下方式指定环境变量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token comment"># 禁用CGO</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux    <span class="token comment"># 目标平台是linux</span>
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64  <span class="token comment"># 目标处理器架构是amd64</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你的 Windows 使用的是 <code>PowerShell</code> 终端，那么设置环境变量的语法为：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$ENV</span>:CGO_ENABLED<span class="token operator">=</span><span class="token number">0</span>
<span class="token variable">$ENV</span>:GOOS<span class="token operator">=</span><span class="token string">&quot;linux&quot;</span>
<span class="token variable">$ENV</span>:GOARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在你的Windows终端下执行完上述命令后，再执行下面的命令，得到的就是能够在Linux平台运行的可执行文件了。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Windows 编译 Mac 可执行文件</li></ol><p>cmd:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64

go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>PowerShell:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$ENV</span>:CGO_ENABLED<span class="token operator">=</span><span class="token number">0</span>
<span class="token variable">$ENV</span>:GOOS<span class="token operator">=</span><span class="token string">&quot;darwin&quot;</span>
<span class="token variable">$ENV</span>:GOARCH<span class="token operator">=</span><span class="token string">&quot;amd64&quot;</span>

go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Mac 编译 Linux 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>Mac 编译 Windows 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>Linux 编译 Mac 可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>Linux编译Windows可执行文件</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-4-执行" tabindex="-1"><a class="header-anchor" href="#_4-4-执行" aria-hidden="true">#</a> 4.4. 执行</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="vs-code-配置" tabindex="-1"><a class="header-anchor" href="#vs-code-配置" aria-hidden="true">#</a> VS Code 配置</h2>`,48),_={href:"https://www.liwenzhou.com/posts/Go/vscode/",target:"_blank",rel:"noopener noreferrer"},O=e(`<h2 id="依赖管理" tabindex="-1"><a class="header-anchor" href="#依赖管理" aria-hidden="true">#</a> 依赖管理</h2><h3 id="_1-为什么需要依赖管理" tabindex="-1"><a class="header-anchor" href="#_1-为什么需要依赖管理" aria-hidden="true">#</a> 1. 为什么需要依赖管理</h3><p>最早的时候，Go 所依赖的所有的第三方库都放在 <code>GOPATH</code> 这个目录下面。这就导致了同一个库只能保存一个版本的代码。如果不同的项目依赖同一个第三方的库的不同版本，应该怎么解决？</p><h3 id="_3-go-module" tabindex="-1"><a class="header-anchor" href="#_3-go-module" aria-hidden="true">#</a> 3. go module</h3><p><code>go module</code> 是 Go1.11 版本之后官方推出的版本管理工具，并且从 Go1.13 版本开始，<code>go module</code> 将是Go语言默认的依赖管理工具。</p><blockquote><p>GO111MODULE</p></blockquote><p>要启用 <code>go module</code> 支持首先要设置环境变量 GO111MODULE ，通过它可以开启或关闭模块支持，它有三个可选值：off、on、auto，默认值是 auto。</p><ol><li>GO111MODULE=off 禁用模块支持，编译时会从 GOPATH 和 vendor 文件夹中查找包。</li><li>GO111MODULE=on 启用模块支持，编译时会忽略 GOPATH 和 vendor 文件夹，只根据 go.mod 下载依赖。</li><li>GO111MODULE=auto，当项目在 $GOPATH/src 外且项目根目录有 go.mod 文件时，开启模块支持。</li></ol><h3 id="_4-go-mod-命令" tabindex="-1"><a class="header-anchor" href="#_4-go-mod-命令" aria-hidden="true">#</a> 4. go mod 命令</h3><p>常用的 go mod 命令如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod download    <span class="token comment"># 下载依赖的 module 到本地 cache（默认为$GOPATH/pkg/mod目录）</span>
go mod edit        <span class="token comment"># 编辑 go.mod 文件</span>
go mod graph       <span class="token comment"># 打印模块依赖图</span>
go mod init        <span class="token comment"># 初始化当前文件夹, 创建 go.mod 文件</span>
go mod tidy        <span class="token comment"># 增加缺少的 module，删除无用的 module</span>
go mod vendor      <span class="token comment"># 将依赖复制到 vendor 下</span>
go mod verify      <span class="token comment"># 校验依赖</span>
go mod why         <span class="token comment"># 解释为什么需要依赖</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-go-mod-文件" tabindex="-1"><a class="header-anchor" href="#_5-go-mod-文件" aria-hidden="true">#</a> 5. go.mod 文件</h3><p>go.mod 文件记录了项目所有的依赖信息，其结构大致如下：</p><div class="language-mod line-numbers-mode" data-ext="mod"><pre class="language-mod"><code>module github.com/Q1mi/studygo/blogger

go 1.12

require (
	github.com/DeanThompson/ginpprof v0.0.0-20190408063150-3be636683586
	github.com/gin-gonic/gin v1.4.0
	github.com/go-sql-driver/mysql v1.4.1
	github.com/jmoiron/sqlx v1.2.0
	github.com/satori/go.uuid v1.2.0
	google.golang.org/appengine v1.6.1 // indirect
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中：</p><ul><li>module 用来定义包名</li><li>require 用来定义依赖包及版本</li><li>indirect 表示间接引用</li></ul><h5 id="依赖的版本" tabindex="-1"><a class="header-anchor" href="#依赖的版本" aria-hidden="true">#</a> 依赖的版本</h5><p>go mod支持语义化版本号，比如 <code>go get foo@v1.2.3</code>，也可以跟 git 的分支或 tag，比如 <code>go get foo@master</code>，当然也可以跟 git 提交哈希，比如 <code>go get foo@e3702bed2</code> 。关于依赖的版本支持以下几种格式：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>gopkg.in/tomb.v1 v1.0.0-20141024135613-dd632973f1e7
gopkg.in/vmihailenco/msgpack.v2 v2.9.1
gopkg.in/yaml.v2 &lt;=v2.2.1
github.com/tatsushid/go-fastping v0.0.0-20160109021039-d7bb493dee3e
latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="replace" tabindex="-1"><a class="header-anchor" href="#replace" aria-hidden="true">#</a> replace</h5><p>在国内访问 golang.org/x 的各个包都需要翻墙，你可以在 go.mod 中使用 replace 替换成 github 上对应的库。</p><div class="language-mod line-numbers-mode" data-ext="mod"><pre class="language-mod"><code>replace (
	golang.org/x/crypto v0.0.0-20180820150726-614d502a4dac =&gt; github.com/golang/crypto v0.0.0-20180820150726-614d502a4dac
	golang.org/x/net v0.0.0-20180821023952-922f4815f713 =&gt; github.com/golang/net v0.0.0-20180826012351-8a410e7b638d
	golang.org/x/text v0.3.0 =&gt; github.com/golang/text v0.3.0
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-go-get" tabindex="-1"><a class="header-anchor" href="#_6-go-get" aria-hidden="true">#</a> 6. go get</h3><p>在项目中执行 go get 命令可以下载依赖包，并且还可以指定下载的版本。</p><ul><li>运行 <code>go get -u</code> 将会升级到最新的次要版本或者修订版本(x.y.z， z 是修订版本号， y 是次要版本号)</li><li>运行 <code>go get -u=patch</code> 将会升级到最新的修订版本</li><li>运行 <code>go get package@version</code> 将会升级到指定的版本号version</li></ul><h3 id="_7-整理依赖" tabindex="-1"><a class="header-anchor" href="#_7-整理依赖" aria-hidden="true">#</a> 7. 整理依赖</h3><p>我们在代码中删除依赖代码后，相关的依赖库并不会在 go.mod 文件中自动移除。这种情况下我们可以使用 <code>go mod tidy</code> 命令更新 go.mod 中的依赖关系。</p><h3 id="_8-go-mod-edit" tabindex="-1"><a class="header-anchor" href="#_8-go-mod-edit" aria-hidden="true">#</a> 8. go mod edit</h3><h4 id="格式化" tabindex="-1"><a class="header-anchor" href="#格式化" aria-hidden="true">#</a> 格式化</h4><p>因为我们可以手动修改go.mod文件，所以有些时候需要格式化该文件。Go提供了一下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-fmt</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="添加依赖项" tabindex="-1"><a class="header-anchor" href="#添加依赖项" aria-hidden="true">#</a> 添加依赖项</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-require</span><span class="token operator">=</span>golang.org/x/text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="移除依赖项" tabindex="-1"><a class="header-anchor" href="#移除依赖项" aria-hidden="true">#</a> 移除依赖项</h4><p>比如要在 go.mod中移除 golang.org/x/text 包，可以使用如下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go mod edit <span class="token parameter variable">-droprequire</span><span class="token operator">=</span>golang.org/x/text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_9-在项目中使用go-module" tabindex="-1"><a class="header-anchor" href="#_9-在项目中使用go-module" aria-hidden="true">#</a> 9. 在项目中使用go module</h3><blockquote><p>既有项目</p></blockquote><p>如果需要对一个已经存在的项目启用 <code>go module</code> ，可以按照以下步骤操作：</p><ol><li>在项目目录下执行 <code>go mod init</code> ，生成一个go.mod文件。</li><li>执行 <code>go get</code>，查找并记录当前项目的依赖，同时生成一个 go.sum 记录每个依赖库的版本和哈希值。</li></ol><blockquote><p>新项目</p></blockquote><p>对于一个新创建的项目，我们可以在项目文件夹下按照以下步骤操作：</p><ol><li>执行 <code>go mod init</code> 项目名命令，在当前项目文件夹下创建一个go.mod文件。</li><li>手动编辑 go.mod 中的 require 依赖项或执行 go get 自动发现、维护依赖。</li></ol><h3 id="_10-如何使用go-module导入本地包" tabindex="-1"><a class="header-anchor" href="#_10-如何使用go-module导入本地包" aria-hidden="true">#</a> 10. 如何使用go module导入本地包</h3><h4 id="在同一个项目下" tabindex="-1"><a class="header-anchor" href="#在同一个项目下" aria-hidden="true">#</a> 在同一个项目下</h4><p>目录结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>└── bubble
    ├── dao
    │   └── mysql.go
    ├── go.mod
    └── main.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>bubble/go.mod</code> 内容如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>module zagss/bubble

go 1.14
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bubble/dao/mysql.go</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> dao

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;mypackage.New&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bubble/main.go</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;zagss/bubble/dao&quot;</span>
<span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	dao<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="不在同一个目录下" tabindex="-1"><a class="header-anchor" href="#不在同一个目录下" aria-hidden="true">#</a> 不在同一个目录下</h4><p>目录结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>├── p1
│   ├── go.mod
│   └── main.go
└── p2
    ├── go.mod
    └── p2.go
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个时候，p1, p2 都需要进行 module 初始化，即拥有一个属于自己的 go.mod 文件，内容如下：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># p1 go.mod</span>
module zagss/p1

go <span class="token number">1.20</span>


<span class="token comment"># p2 go.mod</span>
module zagss/p2

go <span class="token number">1.20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后在 <code>p1/main.go</code> 中按如下方式导入：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
  <span class="token comment">// &quot;zagss/p2&quot;</span>
	p22 <span class="token string">&quot;zagss/p2&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// p2.New()</span>
  p22<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为这两个包不在同一个项目路径下，你想要导入本地包，并且这些包也没有发布到远程的 github 或其他代码仓库地址。这个时候我们就需要在 go.mod 文件中使用 <code>replace</code> 指令， p1 的 <code>go.mod</code> 内容如下：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>module zagss<span class="token operator">/</span>p1

<span class="token keyword">go</span> <span class="token number">1.20</span>

require <span class="token string">&quot;zagss/p2&quot;</span> v0<span class="token punctuation">.</span><span class="token number">0.0</span>
replace <span class="token string">&quot;zagss/p2&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&quot;../p2&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>p2.go</code> 内容如下:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> p2

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;p2.New&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,64),q=["src"],G=n("p",null,[a("go 1.18 开始，能够支持在 workspace 中使用多个module。但是必须生成一个 "),n("strong",null,[n("code",null,"go.work")]),a(" 文件，使用如下命令：")],-1),w=n("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[n("pre",{class:"language-bash"},[n("code",null,`go work init ./p1 ./p2
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1);function E(d,y){const i=o("ExternalLinkIcon"),l=o("font");return c(),r("div",null,[v,n("p",null,[a("Go官网下载地址： "),n("a",m,[a("https://golang.org/dl/"),s(i)])]),n("p",null,[a("Go官方镜像站（推荐）："),n("a",g,[a("https://golang.google.cn/dl/"),s(i)])]),b,n("p",null,[h,a("：安装go开发包的路径，而从Go 1.8 版本开始，Go 开发包在安装完成后，会为 "),k,a(" 设置一个默认目录。 并且在 Go 1.14 及以后版本中启用了 Go Module 模式之后，不一定非要将代码写到 "),x,a(" 目录下，所以也就 "),s(l,{style:{color:"var(--c-text-accent)"}},{default:p(()=>[a("不需要我们再自己配置GOPATH")]),_:1}),a(" 了，使用默认即可。")]),f,n("p",null,[n("a",_,[a("VS Code配置Go语言开发环境"),s(i)])]),O,n("p",null,[a("⚠️ 注意：当工作区需要生成两个 go.mod 时，编辑器会报错: "),n("img",{src:d.$withBase("/images/go_work.png"),alt:"foo"},null,8,q)]),G,w])}const P=t(u,[["render",E],["__file","learn.html.vue"]]);export{P as default};
